<div class="max-w-2xl mx-auto p-4">
  <!-- Back to Posts link styled as a subtle blue link -->
  <%= link_to 'Back to Posts', posts_path, class: "text-blue-500 hover:underline" %>

  <!-- Post container styled like a Twitter card -->
  <div class="mt-4 bg-white p-4 rounded-lg shadow-md">
    <% if @post.original_post %>
      <!-- Repost info styled like Twitter's retweet indicator -->
      <p class="text-sm text-gray-500 mb-2">
        Reposted from <%= link_to @post.original_post.user.email.split('@').first.gsub(/\d/, '').sub(/\A\w/, &:upcase), @post.original_post, class: "text-blue-500 hover:underline" %>
      </p>
    <% end %>

    <!-- User info and post time in a flex row, mimicking Twitter's header -->
    <div class="flex justify-between items-center">
      <span class="font-bold text-gray-900"><%= @post.user.email.split('@').first.gsub(/\d/, '').sub(/\A\w/, &:upcase) %></span>
      <span class="text-gray-500 text-sm"><%= time_ago_in_words(@post.created_at) %> ago</span>
    </div>

    <!-- Post body with some spacing -->
    <p class="mt-2 text-gray-800"><%= @post.body %></p>

    <!-- Action buttons (like and repost) with counts, styled like Twitter -->
    <div class="flex space-x-6 mt-3">
      <div class="flex items-center">
        <% if current_user %>
          <%= button_to post_likes_path(@post), method: :post, class: "bg-transparent border-none p-0 text-gray-500 hover:text-red-500 focus:outline-none", "aria-label": "Like this post" do %>
            <i class="fa fa-heart" aria-hidden="true"></i>
          <% end %>
        <% end %>
        <span class="ml-1 text-gray-600"><%= @post.likes.count %></span>
      </div>
      <div class="flex items-center">
        <% if current_user %>
          <%= button_to repost_post_path(@post), method: :post, class: "bg-transparent border-none p-0 text-gray-500 hover:text-green-500 focus:outline-none", "aria-label": "Repost this post" do %>
            <i class="fa fa-retweet" aria-hidden="true"></i>
          <% end %>
        <% end %>
        <span class="ml-1 text-gray-600"><%= @post.reposts.count %></span>
      </div>
    </div>
  </div>

  <!-- Comments section -->
  <div class="mt-6">
    <h2 class="text-lg font-semibold text-gray-900">Comments</h2>
    <% @post.comments.each do |comment| %>
      <div class="mt-3 bg-gray-50 p-3 rounded-md">
        <span class="font-bold text-gray-900"><%= comment.user.email.split('@').first.gsub(/\d/, '').sub(/\A\w/, &:upcase) %></span>
        <p class="mt-1 text-gray-700"><%= comment.body %></p>
      </div>
    <% end %>
  </div>

  <!-- Comment form for logged-in users -->
  <% if current_user %>
    <div class="mt-6">
      <h3 class="text-md font-semibold text-gray-900">Add a Comment</h3>
      <%= form_with model: [@post, Comment.new], class: "mt-2" do |form| %>
        <div>
          <%= form.text_area :body, class: "w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent", rows: 3, placeholder: "Write your comment..." %>
        </div>
        <div class="mt-2 text-right">
          <%= form.submit "Post Comment", class: "bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500" %>
        </div>
      <% end %>
    </div>
  <% end %>
</div>